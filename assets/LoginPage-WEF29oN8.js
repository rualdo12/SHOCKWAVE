import{u as y,r as i,a as j,b as v,j as e,s as N,c as S,d as C,g as k}from"./main-BI37Gw7s.js";const P=()=>{const{signInWithGoogle:p}=y(),[s,u]=i.useState({email:"",password:""}),[m,h]=i.useState(""),[g,a]=i.useState(""),[l,o]=i.useState(!1),[n,x]=i.useState("login"),d=j(),c=v().state?.from?.pathname||"/admin",b=async t=>{t.preventDefault(),o(!0),a("");try{await N(S,s.email.trim(),s.password),d(c,{replace:!0})}catch(r){a(r.message||"Login failed")}finally{o(!1)}},w=async t=>{if(t.preventDefault(),s.password!==m){a("Passwords do not match.");return}o(!0),a("");try{const r=await C({email:s.email.trim(),password:s.password});await k(r.uid,r.email||""),d(c,{replace:!0})}catch(r){a(r.message||"Account creation failed")}finally{o(!1)}},f=async()=>{o(!0),a("");try{await p(),d(c,{replace:!0})}catch(t){a(t.message||"Google login failed")}finally{o(!1)}};return e.jsx("div",{className:"min-h-screen bg-custom-dark flex items-center justify-center px-4 py-10",children:e.jsxs("div",{className:"grid w-full max-w-4xl gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"glass-card rounded-2xl p-8 border border-custom-gold/30",children:[e.jsx("p",{className:"text-custom-gold text-xs uppercase tracking-[0.35em] mb-2",children:"Account access"}),e.jsx("h1",{className:"text-3xl font-extrabold text-white mb-2",children:"Welcome"}),e.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Sign in or create a new account to manage orders, rewards, and admin access."}),e.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[e.jsx("li",{children:"• One login for both online and in-person purchases."}),e.jsx("li",{children:"• Earn and sync reward stamps automatically."}),e.jsx("li",{children:"• Admin tools unlock if your role allows it."})]})]}),e.jsxs("div",{className:"glass-card rounded-2xl p-8 border border-custom-gold/30",children:[e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("button",{onClick:()=>{x("login"),a("")},className:`flex-1 py-2 rounded-lg font-bold transition ${n==="login"?"bg-custom-gold text-black shadow":"bg-custom-gray text-white hover:border-custom-gold border border-white/10"}`,disabled:l,children:"Sign in"}),e.jsx("button",{onClick:()=>{x("signup"),a("")},className:`flex-1 py-2 rounded-lg font-bold transition ${n==="signup"?"bg-custom-gold text-black shadow":"bg-custom-gray text-white hover:border-custom-gold border border-white/10"}`,disabled:l,children:"Create account"})]}),e.jsxs("form",{onSubmit:n==="login"?b:w,className:"space-y-3",children:[e.jsx("input",{className:"w-full bg-custom-gray text-white px-3 py-3 rounded border border-white/10 focus:border-custom-gold focus:outline-none transition",placeholder:"Email",type:"email",value:s.email,onChange:t=>u({...s,email:t.target.value}),required:!0}),e.jsx("input",{className:"w-full bg-custom-gray text-white px-3 py-3 rounded border border-white/10 focus:border-custom-gold focus:outline-none transition",placeholder:"Password",type:"password",value:s.password,onChange:t=>u({...s,password:t.target.value}),required:!0}),n==="signup"&&e.jsx("input",{className:"w-full bg-custom-gray text-white px-3 py-3 rounded border border-white/10 focus:border-custom-gold focus:outline-none transition",placeholder:"Confirm password",type:"password",value:m,onChange:t=>h(t.target.value),required:!0}),e.jsx("button",{disabled:l,className:"w-full bg-custom-gold text-black font-bold py-3 rounded hover:bg-white transition disabled:opacity-50",children:l?"Please wait...":n==="login"?"Sign in":"Create account"})]}),e.jsx("div",{className:"my-4 text-center text-gray-400 text-sm",children:"or"}),e.jsx("button",{onClick:f,disabled:l,className:"w-full border border-custom-gold text-custom-gold font-bold py-3 rounded hover:bg-custom-gold hover:text-black transition disabled:opacity-50",children:"Continue with Google"}),g&&e.jsx("p",{className:"text-red-400 text-sm mt-4",children:g}),e.jsx("p",{className:"text-gray-500 text-xs mt-3",children:"By continuing you agree to receive SHOCKWAVE updates. Opt out anytime."})]})]})})};export{P as default};
