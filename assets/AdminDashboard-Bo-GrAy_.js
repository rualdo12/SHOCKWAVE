import{j as e,r as i,u as S,e as D,l as U,f as I,h as f,i as T,k as L,d as G,m as z,V as M,R as Q,n as H,o as J,p as V,q as W,t as K,v as X}from"./main-DO_m9C0z.js";const E=({title:g,description:h,children:l,onCreate:d})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:g}),e.jsx("p",{className:"text-gray-400 text-sm",children:h})]}),d&&e.jsx("button",{onClick:d,className:"px-4 py-2 rounded bg-custom-gold text-black font-bold hover:bg-white transition",children:"New"})]}),l]}),P={title:"",excerpt:"",body:"",category:"",image:""},O=({label:g,value:h,onChange:l,placeholder:d,minHeight:s="120px"})=>{const a=i.useRef(null);i.useEffect(()=>{a.current&&a.current.innerHTML!==(h||"")&&(a.current.innerHTML=h||"")},[h]);const c=(u,b=null)=>{a.current&&(a.current.focus(),document.execCommand(u,!1,b),l(a.current.innerHTML))},r=u=>l(u.currentTarget.innerHTML);return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-xs text-gray-200 flex flex-wrap gap-2",children:[e.jsx("button",{type:"button",className:"px-2 py-1 bg-gray-700 rounded hover:bg-gray-600",onClick:()=>c("bold"),children:"Bold"}),e.jsx("button",{type:"button",className:"px-2 py-1 bg-gray-700 rounded hover:bg-gray-600",onClick:()=>c("italic"),children:"Italic"}),e.jsx("button",{type:"button",className:"px-2 py-1 bg-gray-700 rounded hover:bg-gray-600",onClick:()=>c("underline"),children:"Underline"}),e.jsx("button",{type:"button",className:"px-2 py-1 bg-gray-700 rounded hover:bg-gray-600",onClick:()=>c("formatBlock","h3"),children:"H3"}),e.jsx("button",{type:"button",className:"px-2 py-1 bg-gray-700 rounded hover:bg-gray-600",onClick:()=>c("formatBlock","h4"),children:"H4"}),e.jsx("button",{type:"button",className:"px-2 py-1 bg-gray-700 rounded hover:bg-gray-600",onClick:()=>c("insertUnorderedList"),children:"Bullets"}),e.jsx("button",{type:"button",className:"px-2 py-1 bg-gray-700 rounded hover:bg-gray-600",onClick:()=>c("insertOrderedList"),children:"Numbered"}),e.jsx("button",{type:"button",className:"px-2 py-1 bg-gray-700 rounded hover:bg-gray-600",onClick:()=>c("formatBlock","blockquote"),children:"Quote"}),e.jsx("button",{type:"button",className:"px-2 py-1 bg-gray-700 rounded hover:bg-gray-600",onClick:()=>c("removeFormat"),children:"Clear"})]}),e.jsx("div",{ref:a,contentEditable:!0,suppressContentEditableWarning:!0,onInput:r,className:"w-full bg-gray-800 text-white px-3 py-2 rounded border border-gray-700 focus:outline-none focus:ring-2 focus:ring-custom-gold/60 focus:border-custom-gold/40 leading-relaxed rich-text-area",style:{minHeight:s},"data-placeholder":d}),g&&e.jsx("p",{className:"text-xs text-gray-400",children:g})]})},Y=()=>{const[g,h]=i.useState([]),[l,d]=i.useState(null),[s,a]=i.useState(P),[c,r]=i.useState(""),[u,b]=i.useState(!1),{user:m}=S();i.useEffect(()=>{if(!D)return;const o=U("blog",h);return()=>o&&o()},[]);const w=()=>{d("new"),a(P),r("")},N=o=>{d(o.id),a(o),r("")},v=async()=>{if(!s.title){r("Title required");return}r("Saving...");try{if(l==="new"){const o=await I("blog",s);f({type:"blog:create",uid:m?.uid,email:m?.email,id:o.id})}else await T("blog",l,s),f({type:"blog:update",uid:m?.uid,email:m?.email,id:l});d(null),a(P),r("Saved")}catch(o){r(o.message||"Save failed")}},t=async o=>{window.confirm("Delete this blog post?")&&(await L("blog",o),f({type:"blog:delete",uid:m?.uid,email:m?.email,id:o}))},x=async o=>{if(o){if(o.size>4*1024*1024){r("Image too large (max 4MB).");return}b(!0),r("Uploading image...");try{const y=new FormData;y.append("file",o);const p=await fetch("/api/upload.php",{method:"POST",body:y}),j=await p.text();let C=null;try{C=JSON.parse(j)}catch{}if(!p.ok||!C||C.error)throw new Error(C&&C.error||j||"Upload failed");a(R=>({...R,image:C.url})),r("Image uploaded.")}catch(y){const p=typeof window<"u"&&window.location.hostname.includes("github.io");r(p?"Image upload endpoint unavailable on GitHub Pages. Paste an Image URL instead.":y.message||"Upload failed")}finally{b(!1)}}};return e.jsxs(E,{title:"Blog",description:"Create, edit, and delete blog posts. Updates are live.",onCreate:w,children:[c&&e.jsx("div",{className:"text-sm text-custom-gold",children:c}),l&&e.jsxs("div",{className:"glass-card p-4 rounded-lg border border-gray-700 space-y-3",children:[e.jsx("input",{className:"w-full bg-gray-800 text-white px-3 py-2 rounded",placeholder:"Title",value:s.title,onChange:o=>a({...s,title:o.target.value})}),e.jsx("input",{className:"w-full bg-gray-800 text-white px-3 py-2 rounded",placeholder:"Category",value:s.category,onChange:o=>a({...s,category:o.target.value})}),e.jsx("input",{className:"w-full bg-gray-800 text-white px-3 py-2 rounded",placeholder:"Image URL",value:s.image,onChange:o=>a({...s,image:o.target.value})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Tip: on GitHub Pages, use a direct image URL (Cloudinary, Firebase Storage, etc.)."}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:o=>x(o.target.files?.[0]),className:"text-sm"}),e.jsx("span",{className:"text-gray-500",children:"Max 4MB"})]}),e.jsx(O,{placeholder:"Excerpt (can include basic formatting)",value:s.excerpt,onChange:o=>a({...s,excerpt:o}),minHeight:"100px",label:"Tip: keep this short — it shows in the card list."}),e.jsx(O,{placeholder:"Body content (supports bold, italics, headings, lists)",value:s.body,onChange:o=>a({...s,body:o}),minHeight:"180px",label:"Use the toolbar for headings, bullets, and emphasis."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:v,className:"bg-custom-gold text-black px-4 py-2 rounded font-bold",children:"Save"}),e.jsx("button",{onClick:()=>d(null),className:"px-4 py-2 rounded border border-gray-700",children:"Cancel"}),u&&e.jsx("span",{className:"text-xs text-gray-400",children:"Uploading..."})]})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:g.map(o=>e.jsxs("div",{className:"glass-card border border-gray-800 rounded-xl p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:o.title}),e.jsx("p",{className:"text-xs text-gray-400",children:o.category})]}),e.jsxs("div",{className:"space-x-2 text-sm",children:[e.jsx("button",{onClick:()=>N(o),className:"text-custom-gold",children:"Edit"}),e.jsx("button",{onClick:()=>t(o.id),className:"text-red-400",children:"Delete"})]})]}),e.jsx("p",{className:"text-gray-300 text-sm",children:o.excerpt})]},o.id))})]})},A={title:"",description:"",image:"",tags:""},Z=()=>{const[g,h]=i.useState([]),[l,d]=i.useState(null),[s,a]=i.useState(A),[c,r]=i.useState(""),[u,b]=i.useState(!1),{user:m}=S();i.useEffect(()=>{if(!D)return;const t=U("portfolio",h);return()=>t&&t()},[]);const w=async()=>{if(!s.title)return r("Title required");r("Saving...");const t={...s,tags:s.tags.split(",").map(x=>x.trim()).filter(Boolean)};try{if(l==="new"){const x=await I("portfolio",t);f({type:"portfolio:create",uid:m?.uid,email:m?.email,id:x.id})}else await T("portfolio",l,t),f({type:"portfolio:update",uid:m?.uid,email:m?.email,id:l});d(null),a(A),r("Saved")}catch(x){r(x.message||"Save failed")}},N=async t=>{window.confirm("Delete this portfolio item?")&&(await L("portfolio",t),f({type:"portfolio:delete",uid:m?.uid,email:m?.email,id:t}))},v=async t=>{if(t){if(t.size>4*1024*1024){r("Image too large (max 4MB).");return}b(!0),r("Uploading image...");try{const x=new FormData;x.append("file",t);const o=await fetch("/api/upload.php",{method:"POST",body:x}),y=await o.text();let p=null;try{p=JSON.parse(y)}catch{}if(!o.ok||!p||p.error)throw new Error(p&&p.error||y||"Upload failed");a(j=>({...j,image:p.url})),r("Image uploaded.")}catch(x){r(x.message||"Upload failed")}finally{b(!1)}}};return e.jsxs(E,{title:"Portfolio",description:"Manage portfolio cards and galleries.",onCreate:()=>{d("new"),a(A),r("")},children:[c&&e.jsx("div",{className:"text-sm text-custom-gold",children:c}),l&&e.jsxs("div",{className:"glass-card p-4 rounded-lg border border-gray-700 space-y-3",children:[e.jsx("input",{className:"w-full bg-gray-800 text-white px-3 py-2 rounded",placeholder:"Title",value:s.title,onChange:t=>a({...s,title:t.target.value})}),e.jsx("input",{className:"w-full bg-gray-800 text-white px-3 py-2 rounded",placeholder:"Image URL",value:s.image,onChange:t=>a({...s,image:t.target.value})}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:t=>v(t.target.files?.[0]),className:"text-sm"}),e.jsx("span",{className:"text-gray-500",children:"Max 4MB"})]}),e.jsx("textarea",{className:"w-full bg-gray-800 text-white px-3 py-2 rounded",placeholder:"Description",value:s.description,onChange:t=>a({...s,description:t.target.value})}),e.jsx("input",{className:"w-full bg-gray-800 text-white px-3 py-2 rounded",placeholder:"Tags (comma separated)",value:s.tags,onChange:t=>a({...s,tags:t.target.value})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:w,className:"bg-custom-gold text-black px-4 py-2 rounded font-bold",children:"Save"}),e.jsx("button",{onClick:()=>d(null),className:"px-4 py-2 rounded border border-gray-700",children:"Cancel"})]})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:g.map(t=>e.jsxs("div",{className:"glass-card border border-gray-800 rounded-xl p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h3",{className:"text-xl font-bold",children:t.title}),e.jsxs("div",{className:"space-x-2 text-sm",children:[e.jsx("button",{onClick:()=>{d(t.id),a({...t,tags:(t.tags||[]).join(", ")})},className:"text-custom-gold",children:"Edit"}),e.jsx("button",{onClick:()=>N(t.id),className:"text-red-400",children:"Delete"})]})]}),e.jsx("p",{className:"text-gray-300 text-sm",children:t.description}),t.tags&&e.jsxs("p",{className:"text-xs text-gray-400",children:["Tags: ",(t.tags||[]).join(", ")]})]},t.id))})]})},F={name:"",price:"",description:"",image:"",category:"",stock:0},ee=()=>{const[g,h]=i.useState([]),[l,d]=i.useState(null),[s,a]=i.useState(F),[c,r]=i.useState(""),[u,b]=i.useState(!1),{user:m}=S();i.useEffect(()=>{if(!D)return;const t=U("shop",h);return()=>t&&t()},[]);const w=async()=>{if(!s.name)return r("Name required");r("Saving...");const t={...s,price:Number(s.price)||0,stock:Number(s.stock)||0};try{if(l==="new"){const x=await I("shop",t);f({type:"shop:create",uid:m?.uid,email:m?.email,id:x.id})}else await T("shop",l,t),f({type:"shop:update",uid:m?.uid,email:m?.email,id:l});d(null),a(F),r("Saved")}catch(x){r(x.message||"Save failed")}},N=async t=>{window.confirm("Delete this product?")&&(await L("shop",t),f({type:"shop:delete",uid:m?.uid,email:m?.email,id:t}))},v=async t=>{if(t){if(t.size>4*1024*1024){r("Image too large (max 4MB).");return}b(!0),r("Uploading image...");try{const x=new FormData;x.append("file",t);const o=await fetch("/api/upload.php",{method:"POST",body:x}),y=await o.text();let p=null;try{p=JSON.parse(y)}catch{}if(!o.ok||!p||p.error)throw new Error(p&&p.error||y||"Upload failed");a(j=>({...j,image:p.url})),r("Image uploaded.")}catch(x){const o=typeof window<"u"&&window.location.hostname.includes("github.io");r(o?"Image upload endpoint unavailable on GitHub Pages. Paste an Image URL instead.":x.message||"Upload failed")}finally{b(!1)}}};return e.jsxs(E,{title:"Shop / Offers",description:"Manage SHOCKWAVE offers (services and products) that feed the storefront.",onCreate:()=>{d("new"),a(F),r("")},children:[c&&e.jsx("div",{className:"text-sm text-custom-gold",children:c}),l&&e.jsxs("div",{className:"glass-card p-4 rounded-lg border border-gray-700 space-y-3",children:[e.jsx("input",{className:"w-full bg-gray-800 text-white px-3 py-2 rounded",placeholder:"Name",value:s.name,onChange:t=>a({...s,name:t.target.value})}),e.jsx("input",{className:"w-full bg-gray-800 text-white px-3 py-2 rounded",placeholder:"Price",value:s.price,onChange:t=>a({...s,price:t.target.value})}),e.jsx("input",{className:"w-full bg-gray-800 text-white px-3 py-2 rounded",placeholder:"Category (e.g. Service Pack, Consulting, Retainer)",value:s.category,onChange:t=>a({...s,category:t.target.value})}),e.jsx("input",{className:"w-full bg-gray-800 text-white px-3 py-2 rounded",placeholder:"Image URL",value:s.image,onChange:t=>a({...s,image:t.target.value})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Tip: on GitHub Pages, use a direct image URL (Cloudinary, Firebase Storage, etc.)."}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:t=>v(t.target.files?.[0]),className:"text-sm"}),e.jsx("span",{className:"text-gray-500",children:"Max 4MB"})]}),e.jsx("textarea",{className:"w-full bg-gray-800 text-white px-3 py-2 rounded",placeholder:"Description",value:s.description,onChange:t=>a({...s,description:t.target.value})}),e.jsx("input",{className:"w-full bg-gray-800 text-white px-3 py-2 rounded",placeholder:"Stock",value:s.stock,onChange:t=>a({...s,stock:t.target.value})}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("button",{onClick:w,className:"bg-custom-gold text-black px-4 py-2 rounded font-bold",children:"Save"}),e.jsx("button",{onClick:()=>d(null),className:"px-4 py-2 rounded border border-gray-700",children:"Cancel"}),u&&e.jsx("span",{className:"text-xs text-gray-400",children:"Uploading..."})]})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:g.map(t=>e.jsxs("div",{className:"glass-card border border-gray-800 rounded-xl p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:t.name}),e.jsxs("p",{className:"text-sm text-custom-gold",children:["R ",t.price]})]}),e.jsxs("div",{className:"space-x-2 text-sm",children:[e.jsx("button",{onClick:()=>{d(t.id),a(t)},className:"text-custom-gold",children:"Edit"}),e.jsx("button",{onClick:()=>N(t.id),className:"text-red-400",children:"Delete"})]})]}),e.jsx("p",{className:"text-gray-300 text-sm",children:t.description}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Category: ",t.category," · Stock: ",t.stock]})]},t.id))})]})},B={name:"",summary:"",details:"",price:"",image:""},te=()=>{const[g,h]=i.useState([]),[l,d]=i.useState(null),[s,a]=i.useState(B),[c,r]=i.useState(""),[u,b]=i.useState(!1),{user:m}=S();i.useEffect(()=>{if(!D)return;const t=U("services",h);return()=>t&&t()},[]);const w=async()=>{if(!s.name)return r("Name required");r("Saving...");try{if(l==="new"){const t=await I("services",s);f({type:"services:create",uid:m?.uid,email:m?.email,id:t.id})}else await T("services",l,s),f({type:"services:update",uid:m?.uid,email:m?.email,id:l});d(null),a(B),r("Saved")}catch(t){r(t.message||"Save failed")}},N=async t=>{window.confirm("Delete this service?")&&(await L("services",t),f({type:"services:delete",uid:m?.uid,email:m?.email,id:t}))},v=async t=>{if(t){if(t.size>4*1024*1024){r("Image too large (max 4MB).");return}b(!0),r("Uploading image...");try{const x=new FormData;x.append("file",t);const o=await fetch("/api/upload.php",{method:"POST",body:x}),y=await o.text();let p=null;try{p=JSON.parse(y)}catch{}if(!o.ok||!p||p.error)throw new Error(p&&p.error||y||"Upload failed");a(j=>({...j,image:p.url})),r("Image uploaded.")}catch(x){r(x.message||"Upload failed")}finally{b(!1)}}};return e.jsxs(E,{title:"Services",description:"Manage services that feed the Services page/cards.",onCreate:()=>{d("new"),a(B),r("")},children:[c&&e.jsx("div",{className:"text-sm text-custom-gold",children:c}),l&&e.jsxs("div",{className:"glass-card p-4 rounded-lg border border-gray-700 space-y-3",children:[e.jsx("input",{className:"w-full bg-gray-800 text-white px-3 py-2 rounded",placeholder:"Name",value:s.name,onChange:t=>a({...s,name:t.target.value})}),e.jsx("input",{className:"w-full bg-gray-800 text-white px-3 py-2 rounded",placeholder:"Price / Label",value:s.price,onChange:t=>a({...s,price:t.target.value})}),e.jsx("input",{className:"w-full bg-gray-800 text-white px-3 py-2 rounded",placeholder:"Image URL",value:s.image,onChange:t=>a({...s,image:t.target.value})}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:t=>v(t.target.files?.[0]),className:"text-sm"}),e.jsx("span",{className:"text-gray-500",children:"Max 4MB"})]}),e.jsx("textarea",{className:"w-full bg-gray-800 text-white px-3 py-2 rounded",placeholder:"Summary",value:s.summary,onChange:t=>a({...s,summary:t.target.value})}),e.jsx("textarea",{className:"w-full bg-gray-800 text-white px-3 py-2 rounded min-h-[120px]",placeholder:"Details",value:s.details,onChange:t=>a({...s,details:t.target.value})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:w,className:"bg-custom-gold text-black px-4 py-2 rounded font-bold",children:"Save"}),e.jsx("button",{onClick:()=>d(null),className:"px-4 py-2 rounded border border-gray-700",children:"Cancel"})]})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:g.map(t=>e.jsxs("div",{className:"glass-card border border-gray-800 rounded-xl p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h3",{className:"text-xl font-bold",children:t.name}),e.jsxs("div",{className:"space-x-2 text-sm",children:[e.jsx("button",{onClick:()=>{d(t.id),a(t)},className:"text-custom-gold",children:"Edit"}),e.jsx("button",{onClick:()=>N(t.id),className:"text-red-400",children:"Delete"})]})]}),e.jsx("p",{className:"text-gray-300 text-sm",children:t.summary}),e.jsx("p",{className:"text-xs text-gray-400",children:t.price})]},t.id))})]})},_={email:"",password:"",role:"user"},ae=()=>{const[g,h]=i.useState([]),[l,d]=i.useState(_),[s,a]=i.useState(""),{user:c}=S();i.useEffect(()=>{const u=U("userRoles",h);return()=>u&&u()},[]);const r=async()=>{if(!l.email||!l.role)return a("Email and role required");a("Saving...");try{if(l.password){const u=await G(l);f({type:"user:create",uid:c?.uid,email:c?.email,target:u.uid,targetEmail:l.email,role:l.role})}else{const u=g.find(b=>b.email===l.email);if(!u)return a("No UID for this email; provide password to create");await z(u.id,l.email,l.role),f({type:"user:updateRole",uid:c?.uid,email:c?.email,target:u.id,targetEmail:l.email,role:l.role})}d(_),a("Saved")}catch(u){a(u.message||"Error saving user")}};return e.jsxs(E,{title:"Users",description:"Create accounts and update roles. Password required only for new accounts.",onCreate:()=>{d(_),a("")},children:[s&&e.jsx("div",{className:"text-sm text-custom-gold mb-2",children:s}),e.jsxs("div",{className:"glass-card p-4 rounded-lg border border-gray-700 space-y-3",children:[e.jsx("input",{className:"w-full bg-gray-800 text-white px-3 py-2 rounded",placeholder:"Email",value:l.email,onChange:u=>d({...l,email:u.target.value})}),e.jsx("input",{className:"w-full bg-gray-800 text-white px-3 py-2 rounded",placeholder:"Password (only for new user)",type:"password",value:l.password,onChange:u=>d({...l,password:u.target.value})}),e.jsxs("select",{className:"w-full bg-gray-800 text-white px-3 py-2 rounded",value:l.role,onChange:u=>d({...l,role:u.target.value}),children:[e.jsx("option",{value:"admin",children:"admin"}),e.jsx("option",{value:"user",children:"user"})]}),e.jsx("button",{onClick:r,className:"bg-custom-gold text-black px-4 py-2 rounded font-bold",children:"Save"})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-3 mt-4",children:g.map(u=>e.jsx("div",{className:"glass-card border border-gray-800 rounded-xl p-4 flex justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-bold",children:u.email}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Role: ",u.role]})]})},u.id))})]})},se=()=>{const[g,h]=i.useState([]),[l,d]=i.useState(null),[s,a]=i.useState(M[0].id),[c,r]=i.useState(""),[u,b]=i.useState(""),[m,w]=i.useState(null),{user:N}=S();i.useEffect(()=>{const n=U("rewardStamps",h);return()=>n&&n()},[]);const v=i.useMemo(()=>{if(!u)return g;const n=u.toLowerCase();return g.filter(k=>(k.userEmail||"").toLowerCase().includes(n)||(k.id||"").toLowerCase().includes(n))},[g,u]),t=i.useMemo(()=>v.find(n=>n.id===l)||v[0],[v,l]),x=t?.collectedStamps?M.filter(n=>!(t.collectedStamps||[]).includes(n.id)):M,o=i.useMemo(()=>M.map(n=>({...n,filled:(t?.collectedStamps||[]).includes(n.id)})),[t]),y=async(n,k)=>{if(t?.id){r("Working...");try{await n(),r(k),setTimeout(()=>r(""),2e3)}catch(q){r(q.message||"Error")}}},p=()=>{if(!x.length){r("All stamps already collected");return}return y(()=>H(t.id,t.userEmail,x[0]?.id,"admin_next"),"Added next stamp")},j=()=>y(()=>H(t.id,t.userEmail,s,"admin_manual"),"Stamp applied"),C=n=>y(()=>K(t.id,t.userEmail,n,"admin_remove"),"Removed stamp"),R=()=>y(()=>W(t.id,t.userEmail,"admin_reset"),"Reset"),$=()=>y(async()=>{const n=J({...t||{},photoshootClaimed:!t?.photoshootClaimed,photoshootUnlocked:!0});await V(t.id,t.userEmail,n,"admin_toggle_claim"),await f({type:"rewards:toggle_claim",uid:N?.uid,email:N?.email||"",target:t.id,targetEmail:t.userEmail,claimed:n.photoshootClaimed})},"Updated claim flag");return e.jsxs(E,{title:"QR Stamp Rewards",description:"Manage customer stamp wallets synced across QR scans and purchases.",children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:g.map(n=>e.jsx("button",{onClick:()=>d(n.id),className:`px-3 py-2 rounded border text-sm ${(l||g[0]?.id)===n.id?"border-custom-gold text-black bg-custom-gold":"border-gray-700 text-gray-200"}`,children:n.userEmail||n.id},n.id))}),c&&e.jsx("p",{className:"text-sm text-custom-gold mb-3",children:c}),t?e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"glass-card border border-custom-gold/30 rounded-xl p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-custom-gold",children:"Progress"}),e.jsxs("h3",{className:"text-xl font-bold text-white",children:["Collected: ",(t.collectedStamps||[]).length,"/",Q]}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Missing: ",x.map(n=>n.displayName).join(", ")||"None"]}),e.jsxs("p",{className:"text-gray-500 text-xs",children:["User: ",t.userEmail||t.id]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:`text-sm font-bold ${t.photoshootUnlocked?"text-green-400":"text-gray-400"}`,children:t.photoshootUnlocked?"Unlocked":"Locked"}),t.photoshootClaimed&&e.jsx("p",{className:"text-xs text-green-300",children:"Claim marked"})]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:o.map((n,k)=>e.jsxs("div",{className:`rounded-lg p-3 border text-center ${n.filled?"border-custom-gold bg-custom-gold/15 text-white":"border-gray-800 bg-black/30 text-gray-400"}`,children:[e.jsx("div",{className:`w-10 h-10 mx-auto rounded-full flex items-center justify-center font-extrabold ${n.filled?"bg-custom-gold text-black":"bg-gray-800 text-white"}`,children:k+1}),e.jsx("p",{className:"text-sm font-bold mt-2",children:n.displayName}),e.jsx("p",{className:"text-[11px] text-gray-500",children:n.filled?"Collected":"Pending"}),n.filled&&e.jsx("button",{onClick:()=>C(n.id),className:"mt-2 text-[11px] text-red-300 underline hover:text-red-200",children:"Revoke"})]},n.id))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"glass-card border border-gray-800 rounded-xl p-4 space-y-3",children:[e.jsx("p",{className:"text-sm font-bold text-white",children:"Quick actions"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:p,className:"px-4 py-2 rounded bg-custom-gold text-black font-bold hover:bg-white transition",children:"Add Next Stamp"}),e.jsx("button",{onClick:$,className:"px-4 py-2 rounded border border-green-400 text-green-300 font-semibold hover:bg-green-500/20 transition",children:t.photoshootClaimed?"Unmark Claim":"Mark Claimed"}),e.jsx("button",{onClick:R,className:"px-4 py-2 rounded border border-gray-700 text-gray-200 hover:border-red-400 hover:text-red-200 transition",children:"Reset"})]})]}),e.jsxs("div",{className:"glass-card border border-gray-800 rounded-xl p-4 space-y-3",children:[e.jsx("p",{className:"text-sm font-bold text-white",children:"Add a specific stamp"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("select",{value:s,onChange:n=>a(n.target.value),className:"bg-black/40 border border-gray-700 rounded px-3 py-2 text-sm text-white",children:M.map(n=>e.jsx("option",{value:n.id,children:n.displayName},n.id))}),e.jsx("button",{onClick:j,className:"px-4 py-2 rounded bg-gray-800 text-white hover:bg-gray-700 transition",children:"Apply"})]})]})]})]}):e.jsx("p",{className:"text-gray-400",children:"No reward records found yet."})]})},re=[{key:"rewards",label:"Rewards"},{key:"blog",label:"Blog"},{key:"portfolio",label:"Portfolio"},{key:"shop",label:"Shop"},{key:"services",label:"Services"},{key:"users",label:"Users"},{key:"activity",label:"Activity"}],le=()=>{const[g,h]=i.useState([]),[l,d]=i.useState(!0);i.useEffect(()=>{const a=X(c=>{h(c),d(!1)});return()=>a&&a()},[]);const s=a=>a?a.toDate?a.toDate().toLocaleString():new Date(a).toLocaleString():"";return e.jsxs("div",{className:"space-y-3",children:[l&&e.jsx("p",{className:"text-gray-400 text-sm",children:"Loading activity..."}),!l&&g.length===0&&e.jsx("p",{className:"text-gray-400 text-sm",children:"No activity yet."}),g.map(a=>e.jsxs("div",{className:"glass-card border border-gray-800 rounded-xl p-4 flex justify-between gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-custom-gold",children:a.type||"event"}),e.jsxs("p",{className:"text-sm text-white",children:["By ",a.email||a.uid||"unknown user"]}),a.targetEmail&&e.jsxs("p",{className:"text-xs text-gray-400",children:["Target: ",a.targetEmail," ",a.role?`(${a.role})`:""]}),a.id&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Doc: ",a.id]})]}),e.jsx("div",{className:"text-xs text-gray-400 text-right whitespace-nowrap",children:s(a.createdAt)})]},a.id))]})},ie=()=>{const[g,h]=i.useState("blog"),{user:l,role:d,logout:s}=S(),a=()=>{switch(g){case"blog":return e.jsx(Y,{});case"portfolio":return e.jsx(Z,{});case"shop":return e.jsx(ee,{});case"services":return e.jsx(te,{});case"users":return e.jsx(ae,{});case"activity":return e.jsx(le,{});case"rewards":return e.jsx(se,{});default:return null}};return e.jsxs("div",{className:"min-h-screen bg-custom-dark text-white",children:[e.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-black via-[#0a0a0a] to-[#1a1300] opacity-70 pointer-events-none"}),e.jsxs("header",{className:"relative border-b border-gray-800 bg-black/70 backdrop-blur px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-custom-gold uppercase tracking-[0.3em]",children:"Admin"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Control Panel"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Signed in as ",l?.email," (",d,")"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("a",{href:"/",className:"px-4 py-2 rounded border border-gray-700 text-gray-200 hover:border-custom-gold hover:text-white transition",children:"Preview Site"}),e.jsx("button",{onClick:s,className:"px-4 py-2 rounded border border-custom-gold text-custom-gold hover:bg-custom-gold hover:text-black transition font-bold",children:"Logout"})]})]}),e.jsxs("main",{className:"relative container mx-auto px-4 py-8",children:[e.jsx("div",{className:"flex gap-3 mb-6 overflow-x-auto scrollbar-hide",children:re.map(c=>e.jsxs("button",{onClick:()=>h(c.key),className:`px-4 py-2 rounded-lg border transition ${g===c.key?"border-custom-gold text-black bg-custom-gold shadow-[0_0_20px_rgba(253,190,51,0.3)]":"border-gray-700 text-gray-300 hover:border-custom-gold hover:text-white bg-black/40 backdrop-blur"}`,children:[c.label," Manager"]},c.key))}),e.jsx("div",{className:"glass-card border border-custom-gold/20 rounded-2xl p-6",children:a()})]})]})};export{ie as default};
